<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>Create Data</h2>
    <form onsubmit="sendData(); return false;">
   <label>name</label>
   <input type="text" id ="name">
   <label>email</label>
   <input type="text" id ="email">
   <br>
           <input type="submit" > 
    </form>
    <h2>Read Data</h2>
    <input type="button" value="Get details" onclick="receiveData()">
    <h2>Edit Data</h2>
    <h3>ID :<input type="number" id="userId"></h3>
    <h3>NAME :<input type="text" id="updatedname"></h3>
    <h3>Email : <input type="email" id="updatedemail"></h3>
    <input type="button" value="Update details" onclick="editData()">
    <h2>Delete data</h2>
    <h3>ID : <input type="number" id="deleteid"></h3>
    <input type="button" value="Delete" onclick="deleteData()">
    <script>
        function sendData(){
            var data ={
                name:document.getElementById('name').value,
                email:document.getElementById('email').value
            };
            
          
            
          fetch("http://localhost:3000/users",{  
                method: 'POST',
                headers: {
                    'Accept': 'application/json, text/plain, */*',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(function (data) {
                return data.json();
            }).then(function (userData) {
                console.log(userData);
            }).catch(function (err) {
                console.log(err);
                
            });
             }
             function receiveData(){
                 var mdata=[];
fetch("http://localhost:3000",{
    method:"GET",
    headers:{
        'Accept': 'application/json, text/plain, */*',
                    'Content-Type': 'application/json'

    },}).then(function(data){
        return data.json()
;
    }).then(function(data)
     {
        value.push(mdata.toString());
    })
    .catch(function(err) {
        console.log(err);
    })
  window.open("http://localhost:3000")
             }


             function editData(){
            const userData = {
                userId : document.getElementById('userId').value,
                name : document.getElementById('updatedname').value,
                email: document.getElementById('updatedemail').value
            }
            fetch("http://localhost:3000/modifyData/"+parseInt(userData[userId]), {
            
                method: 'PUT',
                headers: {'Accept': 'application/json, text/plain, */*',
                    'Content-Type': 'application/json'
                },
                 
                body: JSON.stringify(userData)
            }).then(function (data) {
                return data.json();
            }).then(function (userData) {
                console.log(userData);
            });
            
        }

 </script>
</body>
</html>